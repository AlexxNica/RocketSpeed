cpp_library(
    name = 'djinni_interface',
    srcs = [
        'djinni/HostId.cpp',
        'djinni/MsgIdImpl.cpp',
    ],
    preprocessor_flags = [
        '-Irocketspeed/github/src-gen/djinni',
    ],
)

cpp_library(
    name = 'djinni_jni',
    srcs = [
        'djinni/jni/NativeClientImpl.cpp',
        'djinni/jni/NativeConfigurationImpl.cpp',
        'djinni/jni/NativeHostId.cpp',
        'djinni/jni/NativeMsgIdImpl.cpp',
        'djinni/jni/NativePublishCallbackImpl.cpp',
        'djinni/jni/NativePublishStatus.cpp',
        'djinni/jni/NativeReceiveCallbackImpl.cpp',
        'djinni/jni/NativeStatus.cpp',
        'djinni/jni/NativeSubscribeCallbackImpl.cpp',
        'djinni/jni/NativeSnapshotCallbackImpl.cpp',
        'djinni/jni/NativeSubscriptionRequestImpl.cpp',
        'djinni/jni/NativeSubscriptionStorage.cpp',
        'djinni/jni/NativeWakeLockImpl.cpp',
    ],
    deps = [
        ':djinni_interface',
        '@/rocketspeed/github/src/djinni:djinni_implementation',
        '@/rocketspeed/github/external/djinni/support-lib/jni',
    ],
    preprocessor_flags = [
        '-Irocketspeed/github/src-gen/djinni',
        '-Irocketspeed/github/external/djinni/support-lib/jni',
        '-Irocketspeed/github/external/Optional',
    ],
    link_whole = True,
)
