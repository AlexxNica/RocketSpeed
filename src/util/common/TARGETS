cpp_library(
    name = 'common',
    headers = AutoHeaders.RECURSIVE_GLOB,
    srcs = [
        'base_env.cc',
        'client_env.cc',
        'coding.cc',
        'guid_generator.cc',
        'host_id.cc',
        'namespace_ids.cc',
        'parsing.cc',
        'random.cc',
        'rate_limiter.cc',
        'statistics.cc',
        'statistics_exporter.cc',
        'status.cc',
        'subscription_id.cc',
        'thread_local.cc',
        'thread_check.cc',
    ],
    preprocessor_flags = [
        '-Irocketspeed/github',
        '-DROCKETSPEED_PLATFORM_POSIX=1',
        '-DOS_LINUX=1',
    ],
    deps = [
        '@/rocketspeed/github/include:rocketspeed',
        '@/rocketspeed/github/src/port:port',
        '@/rocketspeed/github/external/fastlog:fastlog',
    ],
    external_deps = [
        ('e2fsprogs', None, 'uuid'),
    ],
    link_whole = True,
)

cpp_library(
    name = 'fixed_configuration',
    headers = AutoHeaders.RECURSIVE_GLOB,
    srcs = [
        'fixed_configuration.cc',
    ],
    preprocessor_flags = [
        '-Irocketspeed/github',
        '-DROCKETSPEED_PLATFORM_POSIX=1',
        '-DOS_LINUX=1',
    ],
    deps = [
        '@/rocketspeed/github/include:rocketspeed',
        '@/rocketspeed/github/external/folly:headers',
        '@/rocketspeed/github/src/util:util',
    ],
    link_whole = True,
)

cpp_library(
    name = 'configuration_create',
    headers = AutoHeaders.RECURSIVE_GLOB,
    srcs = [
        'configuration_create.cc',
    ],
    preprocessor_flags = [
        '-Irocketspeed/github',
        '-DROCKETSPEED_PLATFORM_POSIX=1',
        '-DOS_LINUX=1',
    ],
    deps = [
        '@/rocketspeed/github/include:rocketspeed',
    ],
    link_whole = True,
)
